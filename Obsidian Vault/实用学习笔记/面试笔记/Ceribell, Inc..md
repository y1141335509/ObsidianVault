失败的面试经历

## 问题
说我现在有overhead摄像头在路口，现在想要判断哪些车辆闯了红灯 1. 设计一个管道架构 2. 指出为了实现该目的需要什么数据 3. 这些数据分别应该如何存储 4. 如果这些数据将被用做训练机器学习模型，该如何存储和用做模型训练？ 5. 假设已经训练好了数千种模型，那么可以用做判断模型好坏的参数有哪些？ 6. 现在我们要设计一个数据库来存放模型的训练结果，你认为需要如何设计，以及该存放哪些数据？ 7. 设计好该数据库之后，你认为可以使用什么工具和方法评价每种模型的好坏？该如何排序？

## 方法

### 1. 管道架构设计

1. **视频采集**：从高架摄像头实时采集视频数据。
2. **视频预处理**：将视频分割成帧，可能还需要调整分辨率、裁剪等以提高处理速度和效率。
3. **车辆检测**：使用图像识别算法（如YOLO、SSD）检测每一帧中的车辆。
4. **信号灯状态检测**：同时检测信号灯的颜色状态（红、黄、绿）。
5. **运动跟踪**：对检测到的车辆进行运动跟踪，以确定其是否在红灯时通过路口。
6. **事件判定**：结合车辆位置、运动轨迹和信号灯状态，判定是否存在闯红灯行为。
7. **数据存储**：将闯红灯事件存储起来，包括车辆信息、时间、地点等。
8. **报告与警告**：生成闯红灯事件的报告，并根据需要发出警告或通知相关部门。

### 2. 需要的数据

- **视频数据**：从摄像头采集的实时视频流。
- **信号灯状态数据**：信号灯的颜色状态，可能需要通过图像识别获得，或者通过与交通信号系统接口直接获得状态信息。
- **车辆标注数据**：用于训练车辆检测模型的标注数据，包括车辆的位置、类型等信息。

### 3. 数据存储方式

- **视频数据**：可以存储在大容量的对象存储服务中，如Amazon S3或Google Cloud Storage，便于管理和访问。
- **信号灯状态数据**：可以存储在时间序列数据库中，如InfluxDB，以便快速查询特定时间的信号灯状态。
- **车辆标注数据**：可以存储在文件系统中，每个文件包含一帧的图片和对应的标注信息，或者使用数据库管理，便于检索和管理。

### 4. 存储和模型训练

- 存储数据时，应该组织好文件目录，使得训练数据易于访问。可以使用TFRecord（TensorFlow）、RecordIO（MXNet）等格式，这些格式可以加速数据的读取过程，特别是在使用GPU训练时。
- 对于模型训练，使用现代的深度学习框架，如TensorFlow或PyTorch，它们提供了数据加载、预处理、模型训练和验证的完整工具链。

### 5. 模型评价参数

- **准确率（Accuracy）**：模型正确识别闯红灯事件的比例。
- **召回率（Recall）**：模型识别出的闯红灯事件占实际闯红灯事件的比例。
- **精确率（Precision）**：正确识别为闯红灯的事件占模型识别为闯红灯的事件的比例。
- **F1 分数**：精确率和召回率的调和平均值，用于衡量模型的稳健性。

### 6. 数据库设计

设计用于存储模型训练结果的数据库时，可以考虑包含以下字段：

- **模型ID**：唯一标识每个模型的ID。
- **模型描述**：简短描述模型的结构和特点。
- **训练日期**：模型训练的日期。
- **准确率**、**召回率**、**精确率**、**F1 分数**：模型性能的关键指标。
- **训练集和验证集信息**：用于训练和验证模型的数据集详情。
- **超参数设置**：模型训练时使用的超参数。

### 7. 工具和方法评价模型

- 使用**交叉验证**和**混淆矩阵**来评估模型的性能。
- **A/B 测试**：在实际环境中对比不同模型的表现。
- 使用图形化工具，如TensorBoard或MLflow，来可视化模型的训练过程和性能指标。
- 根据业务需求和模型性能指标（如F1分数）来排序模型。对于闯红灯检测，可能更重视召回率，以减少漏检。

通过这些步骤，你可以构建一个系统来识别和报告闯红灯事件，并能够持续优化和评估模型的性能。